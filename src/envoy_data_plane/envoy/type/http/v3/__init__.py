# Generated by the protocol buffer compiler.  DO NOT EDIT!
# sources: envoy/type/http/v3/path_transformation.proto
# plugin: python-betterproto
from dataclasses import dataclass
from typing import List

import betterproto
from betterproto.grpc.grpclib_server import ServiceBase


@dataclass(eq=False, repr=False)
class PathTransformation(betterproto.Message):
    # A list of operations to apply. Transformations will be performed in the
    # order that they appear.
    operations: List["PathTransformationOperation"] = betterproto.message_field(1)


@dataclass(eq=False, repr=False)
class PathTransformationOperation(betterproto.Message):
    """A type of operation to alter text."""

    # Enable path normalization per RFC 3986.
    normalize_path_rfc_3986: "PathTransformationOperationNormalizePathRfc3986" = (
        betterproto.message_field(2, group="operation_specifier")
    )
    # Enable merging adjacent slashes.
    merge_slashes: "PathTransformationOperationMergeSlashes" = (
        betterproto.message_field(3, group="operation_specifier")
    )


@dataclass(eq=False, repr=False)
class PathTransformationOperationNormalizePathRfc3986(betterproto.Message):
    """
    Should text be normalized according to RFC 3986? This typically is used for
    path headers before any processing of requests by HTTP filters or routing.
    This applies percent-encoded normalization and path segment normalization.
    Fails on characters disallowed in URLs (e.g. NULLs). See `Normalization and
    Comparison <https://tools.ietf.org/html/rfc3986#section-6>`_ for details of
    normalization. Note that this options does not perform `case normalization
    <https://tools.ietf.org/html/rfc3986#section-6.2.2.1>`_
    """

    pass


@dataclass(eq=False, repr=False)
class PathTransformationOperationMergeSlashes(betterproto.Message):
    """
    Determines if adjacent slashes are merged into one. A common use case is
    for a request path header. Using this option in `:ref:
    PathNormalizationOptions <envoy_api_msg_extensions.filters.network.http_con
    nection_manager.v3.HttpConnectionManager.PathNormalizationOptions>` will
    allow incoming requests with path `//dir///file` to match against route
    with `prefix` match set to `/dir`. When using for header transformations,
    note that slash merging is not part of `HTTP spec
    <https://tools.ietf.org/html/rfc3986>`_ and is provided for convenience.
    """

    pass
